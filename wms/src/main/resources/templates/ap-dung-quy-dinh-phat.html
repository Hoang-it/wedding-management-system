<!DOCTYPE HTML>
<html>
<head> 
    <title>Home Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta charset="utf-8">
    <th:block th:insert="~{index :: libs}"></th:block>
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    
</head>
<body class="nav-md">
    <div class="container body">
      <div class="main_container">
        <th:block th:insert="~{index :: menu-bar}"></th:block>

        <div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <h3>QUY ĐỊNH</h3>
              </div>
            </div>
            <table id="table_id" class="table table-striped table-bordered" style="width:100%">
              <thead>
                <tr>
                  <th scope="col">STT</th>
                  <th scope="col">Quy định</th>
                  <th scope="col">Lựa chọn</th>
                </tr>
              </thead>
              <tbody id="dsCa">
                <tr>
                  <th scope="row">1</th>
                  <td>Áp dụng quy định phạt</td>
                  <td>
                    <input  type="checkbox" id="apDungQuyDinhPhat"  checked data-toggle="toggle" data-on="Sử dụng" data-width="70%" data-height="50%" data-off="Không áp dụng">
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
   
    <!-- Custom Theme Scripts -->
    <script src="../build/js/custom.min.js"></script>

    <script>
      
         $.get("http://localhost:8080/api/quy-dinh-phat", function(data){
          if (data["giaTri"] == "true"){
            //alert("true")
            $('#apDungQuyDinhPhat').bootstrapToggle('on')
          } else{
            //alert("false")
            $('#apDungQuyDinhPhat').bootstrapToggle('off')
          }
          
          $('#apDungQuyDinhPhat').change(function() {
           //alert('Toggle: ' + $(this).prop('checked'))
            data = {}
            data["tenThamSo"] = "KiemTraNgayThanhToan"
            data["giaTri"] = $(this).prop('checked')
            alert(JSON.stringify(data))
            $.ajax({
              type: "POST",
              contentType: "application/json",
              url: "http://localhost:8080/api/cap-nhat-quy-dinh",
              data: JSON.stringify(data),
              dataType: "json",
              success: function(){
                alert("Cap nhat thanh cong")
                location.reload();
              },
              error: function(XMLHttpRequest, textStatus, errorThrown) {
                //alert(JSON.stringify(XMLHttpRequest["responseJSON"]["errorMessageList"]));
                location.reload();
                // $.each(Object.keys(XMLHttpRequest["responseJSON"]["errorMessageList"][0]), function(index, d){
                //   //alert(d);
                //   $("#msg_" + d).html(XMLHttpRequest["responseJSON"]["errorMessageList"][0][d])
                //   $("#msg_" + d).addClass("alert alert-danger")
                // })
              }
            })
          })
        })

         
        
     </script>
</body>
</html>